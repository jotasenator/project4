{% extends "network/layout.html" %}

{% block body %}
<h2 class="ml-3">{{profile_user.username}}</h2>
<div>
    <div class="new-post">
        <div class="d-flex align-items-center flex-column">
            <div class="d-flex">
                <p class="mr-3">Followers: {{followers}}</p>
                <p>Following: {{followings}} </p>
            </div>
            {% if user.is_authenticated and user.username != profile_user.username %}
            <div class="mt-3">
                {% if is_following %}
                <form method="post" action="{% url 'unfollow' profile_user.username %}">
                    {% csrf_token %}
                    <input type="submit" class="btn btn-primary" value="Unfollow" />
                </form>
                {% else %}
                <form method="post" action="{% url 'follow' profile_user.username %}">
                    {% csrf_token %}
                    <input type="submit" class="btn btn-primary" value="Follow" />
                </form>
                {% endif %}
            </div>
            {% endif %}
        </div>
    </div>

    {% for post in page_obj%}
    <div class="card-body new-post mt-3">
        <!-- <h4 class=" card-title ml-3">{{post.user}}</h4> -->
        {% if user.is_authenticated %}
        {% if request.user == post.user%}
        <button class="btn btn-link ml-3" onclick="showAlert('{{post.text}}')">Edit</button>
        {% endif %}
        {% endif %}
        <p class="card-text ml-3 mr-3 text">{{post.text}}</p>
        <p class="card-text ml-3">{{post.created_at}}</p>
    </div>
    {% endfor %}
    <!-- boiler plate for navigtion (page_obj) -->
    {% include 'network/pagination.html' %}
</div>
<script>
    function showAlert ( text )
    {
        alert( text );
    }

</script>

{% endblock %}